<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="assets/favicon4.png" />
  <title>CampusMate â€¢ Student Login</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    body {
      font-family: "Inter", sans-serif;
      min-height: 100vh;
      margin: 0;
      background: radial-gradient(circle at top left,
          rgba(56, 189, 248, 0.18),
          transparent 40%),
        radial-gradient(circle at bottom right,
          rgba(99, 102, 241, 0.18),
          transparent 40%),
        linear-gradient(180deg, #0f172a, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ===============================
   STATIC PCB CIRCUIT LINES
   =============================== */

    .circuit-lines {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* Main circuit traces */
    .circuit-lines path {
      fill: none;

      /* PCB cyan-blue */
      stroke: rgba(56, 189, 248, 0.45);
      stroke-width: 1.4;

      /* Sharp electronic look */
      stroke-linecap: butt;
      stroke-linejoin: miter;

      /* Glow without motion */
      filter:
        drop-shadow(0 0 4px rgba(56, 189, 248, 0.6)) drop-shadow(0 0 10px rgba(99, 102, 241, 0.4));
    }

    /* Circuit nodes / junctions */
    .circuit-lines circle {
      fill: #38bdf8;

      filter:
        drop-shadow(0 0 6px rgba(56, 189, 248, 0.9)) drop-shadow(0 0 16px rgba(56, 189, 248, 0.7));
    }


    /* Remove image-based background */
    .bg {
      min-height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    /* LOGIN CARD */
    .login-card {
      background: rgba(255, 255, 255, 0.14);
      backdrop-filter: blur(18px) saturate(160%);
      -webkit-backdrop-filter: blur(18px) saturate(160%);
      width: 100%;
      max-width: 420px;
      border-radius: 20px;
      padding: 32px 28px;
      box-shadow:
        0 0 0 1px rgba(255, 255, 255, 0.18),
        0 30px 70px rgba(0, 0, 0, 0.55),
        inset 0 0 30px rgba(56, 189, 248, 0.08);
      position: relative;
      z-index: 2;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 22px;
    }

    .brand img {
      width: 55px;
      height: 44px;
    }

    .brand h4 {
      margin: 0;
      font-weight: 600;
      color: #f6cc12;
    }

    .muted {
      font-size: 14px;
      color: #0cd0da;
    }

    .welcome {
      margin-bottom: 20px;
    }

    .welcome h5 {
      margin: 0;
      font-weight: 600;
      color: #ffffff;
    }

    .welcome p {
      margin: 4px 0 0;
      font-size: 14px;
      color: #ffffff;
    }

    .form-control {
      height: 44px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.25);
      color: #ffffff;
    }

    .form-control,
    input {
      color: #ffffff !important;
      caret-color: #38bdf8;
    }

    .form-control::placeholder {
      color: rgba(255, 255, 255, 0.55);
    }

    .form-control:focus {
      background: rgba(255, 255, 255, 0.16);
      border-color: #38bdf8;
      box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.45);
    }

    .form-control:focus-visible {
      outline: none;
    }

    input:-webkit-autofill {
      -webkit-text-fill-color: #ffffff !important;
      box-shadow: 0 0 0 1000px rgba(255, 255, 255, 0.12) inset;
      transition: background-color 5000s ease-in-out 0s;
    }

    .email-icon {
      position: absolute;
      right: 13px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 18px;
    }

    .password-wrapper {
      position: relative;
    }

    .toggle-eye {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 18px;
    }

    .email-icon,
    .toggle-eye {
      color: rgba(255, 255, 255, 0.8);
    }

    .btn-student {
      height: 44px;
      border-radius: 12px;
      font-weight: 600;
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      border: none;
      box-shadow: 0 10px 25px rgba(56, 189, 248, 0.45);
    }

    .btn-student:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 35px rgba(99, 102, 241, 0.55);
    }

    .help-text {
      text-align: center;
      font-size: 13px;
      color: #94a8b8;
      margin-top: 16px;
    }

    .error-msg {
      color: #facc15;
      /* soft red */
      font-weight: 500;
    }

    /* BACKGROUND DESIGN */
    .tech-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .tech-bg span {
      position: absolute;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: #38bdf8;

      box-shadow:
        0 0 8px rgba(56, 189, 248, .9),
        0 0 18px rgba(56, 189, 248, .7),
        120px 80px rgba(56, 189, 248, .5),
        240px 160px rgba(99, 102, 241, .6),
        360px 40px rgba(56, 189, 248, .5),
        480px 200px rgba(99, 102, 241, .6),
        600px 120px rgba(56, 189, 248, .5),
        720px 260px rgba(99, 102, 241, .6);

      animation: floatDots 26s linear infinite;
    }

    .tech-bg span:nth-child(1) {
      top: 20%;
      left: 10%;
      animation-duration: 26s;
    }

    .tech-bg span:nth-child(2) {
      top: 60%;
      left: 15%;
      animation-duration: 32s;
    }

    .tech-bg span:nth-child(3) {
      top: 30%;
      left: 65%;
      animation-duration: 28s;
    }

    .tech-bg span:nth-child(4) {
      top: 70%;
      left: 55%;
      animation-duration: 34s;
    }


    @keyframes floatDots {
      0% {
        transform: translateY(0);
        opacity: 0.5;
      }

      50% {
        opacity: 0.9;
      }

      100% {
        transform: translateY(-140px);
        opacity: 0.4;
      }
    }

    /* ===============================
   MOBILE OPTIMIZATION
   =============================== */
    @media (max-width: 768px) {

      /* Hide micro-branches */
      .circuit-lines path:nth-of-type(n+7) {
        display: none;
      }

      /* Smaller nodes */
      .circuit-lines circle {
        r: 2;
      }

      /* Reduce glow */
      .circuit-lines path {
        filter:
          drop-shadow(0 0 3px rgba(56, 189, 248, .45));
      }
    }

    @media (max-width: 480px) {

      /* Disable circuit lines completely */
      .circuit-lines {
        display: none;
      }

      /* Reduce dot count */
      .tech-bg span:nth-child(n+3) {
        display: none;
      }
    }

    @supports not (backdrop-filter: blur(1px)) {
      .login-card {
        background: rgba(30, 41, 59, 0.95);
      }
    }

    @media (prefers-reduced-motion: reduce) {

      .tech-bg span {
        animation: none !important;
      }
    }

    .circuit-lines,
    .tech-bg {
      will-change: transform;
    }
  </style>
</head>

<body>

  <!--BG DESIGN-->
  <div class="tech-bg">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- CIRCUIT LINES -->
  <svg class="circuit-lines" viewBox="0 0 1200 800" preserveAspectRatio="none">

    <!-- TOP LEFT -->
    <path d="M0 80 H180 V140 H260 V200" />
    <path d="M0 140 H120 V220 H200" />
    <circle cx="180" cy="140" r="3" />
    <circle cx="260" cy="200" r="3" />

    <!-- TOP RIGHT -->
    <path d="M1200 90 H1020 V160 H940 V220" />
    <path d="M1200 150 H1080 V240" />
    <circle cx="1020" cy="160" r="3" />
    <circle cx="940" cy="220" r="3" />

    <!-- BOTTOM LEFT -->
    <path d="M0 620 H160 V560 H240 V500" />
    <path d="M0 680 H120 V580" />
    <circle cx="160" cy="560" r="3" />
    <circle cx="240" cy="500" r="3" />

    <!-- BOTTOM RIGHT -->
    <path d="M1200 620 H1040 V560 H960 V500" />
    <path d="M1200 680 H1080 V580" />
    <circle cx="1040" cy="560" r="3" />
    <circle cx="960" cy="500" r="3" />

    <!-- MIDDLE LEFT -->
    <path d="M0 300 H140 V340 H220" />
    <path d="M0 360 H100 V420 H180" />
    <path d="M220 340 V380" />

    <circle cx="140" cy="340" r="3" />
    <circle cx="220" cy="340" r="3" />
    <circle cx="180" cy="420" r="3" />

    <!-- MIDDLE RIGHT -->
    <path d="M1200 300 H1060 V340 H980" />
    <path d="M1200 360 H1100 V420 H1020" />
    <path d="M980 340 V380" />

    <circle cx="1060" cy="340" r="3" />
    <circle cx="980" cy="340" r="3" />
    <circle cx="1020" cy="420" r="3" />

    <!-- MICRO BRANCHES -->
    <path d="M120 220 V250" />
    <path d="M1080 240 V270" />
    <path d="M160 560 V530" />
    <path d="M1040 560 V530" />

    <circle cx="120" cy="250" r="2.5" />
    <circle cx="1080" cy="270" r="2.5" />
    <circle cx="160" cy="530" r="2.5" />
    <circle cx="1040" cy="530" r="2.5" />

  </svg>

  <svg class="circuit-lines" viewBox="0 0 1200 800" preserveAspectRatio="none" shape-rendering="crispEdges"></svg>

  <!-- LOGIN CARD -->
  <div class="bg">
    <div class="login-card">
      <!-- BRAND -->
      <div class="brand">
        <img src="assets/favicon4.png" alt="CampusMate" />
        <div>
          <h4>CampusMate</h4>
          <div class="muted">Student Portal</div>
        </div>
      </div>

      <!-- WELCOME -->
      <div class="welcome">
        <h5>Welcome</h5>
        <p>Check your attendance, marks ,assignments & announcements</p>
      </div>

      <!-- FORM -->
      <form id="loginForm" autocomplete="off">
        <div class="mb-3 position-relative">
          <input type="email" id="email" class="form-control has-icon" placeholder="Student Email" required />
          <i class="bi bi-envelope email-icon"></i>
        </div>

        <div class="mb-3 password-wrapper">
          <input type="password" id="password" class="form-control" placeholder="Password" required />
          <i class="bi bi-eye toggle-eye" id="togglePassword"></i>
        </div>

        <div id="msg" class="error-msg small mb-2"></div>

        <button type="submit" class="btn btn-student w-100">
          <span id="btnText">Login</span>
          <span id="spinner" class="spinner-border spinner-border-sm ms-2 d-none"></span>
        </button>
      </form>

      <div class="help-text">
        Forgot password? Contact your college office
      </div>
    </div>
  </div>

  <script>
    const token = localStorage.getItem("token");
    const role = localStorage.getItem("role");

    if (token && role === "student") {
      window.location.replace("student-dashboard.html");
    }
  </script>

  <script>
    const API = "https://campusmate-backend-3x5c.onrender.com/api";

    const form = document.getElementById("loginForm");
    const msg = document.getElementById("msg");
    const btnText = document.getElementById("btnText");
    const spinner = document.getElementById("spinner");
    const passwordInput = document.getElementById("password");
    const togglePassword = document.getElementById("togglePassword");

    // ðŸ‘ Toggle password
    togglePassword.addEventListener("click", () => {
      const isPwd = passwordInput.type === "password";
      passwordInput.type = isPwd ? "text" : "password";
      togglePassword.className = isPwd
        ? "bi bi-eye-slash toggle-eye"
        : "bi bi-eye toggle-eye";
    });

    // Login submit
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      msg.innerText = "";

      const email = document.getElementById("email").value.trim();
      const password = passwordInput.value.trim();

      btnText.innerText = "Logging in...";
      spinner.classList.remove("d-none");

      try {
        const res = await fetch(API + "/auth/student/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password }),
        });

        const data = await res.json();

        if (!res.ok) {
          msg.innerText = data.message || "Login failed";
          btnText.innerText = "Login";
          spinner.classList.add("d-none");
          return;
        }

        localStorage.setItem("token", data.token);
        localStorage.setItem("role", "student");
        localStorage.setItem("user", JSON.stringify(data.student));

        window.location.href = "student-dashboard.html";
      } catch (err) {
        msg.innerText = "Server not reachable";
      }

      btnText.innerText = "Login";
      spinner.classList.add("d-none");
    });
  </script>
</body>

</html>